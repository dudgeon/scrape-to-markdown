import"./modulepreload-polyfill-B5Qt9EMX.js";import{i as L,r as b,s as T,d as m,B as f,D as C,l as _,E as N}from"./frontmatter-DagCZPSx.js";import"./constants-I65fpLFJ.js";L(new N);const v=document.getElementById("slack-templates"),S=document.getElementById("add-slack-template"),g=document.getElementById("editor"),A=document.getElementById("editor-title"),h=document.getElementById("template-name"),y=document.getElementById("fields-container"),x=document.getElementById("add-field"),k=document.getElementById("preview"),D=document.getElementById("save-btn"),F=document.getElementById("cancel-btn"),E=document.getElementById("delete-btn"),M=document.getElementById("reset-btn");let o={},s=null;const O={channel:"engineering",channel_id:"C024BE91L",channel_type:"public_channel",topic:"Engineering discussions",purpose:"A place for engineering talk",workspace:"My Workspace",workspace_domain:"myworkspace",source_category:"slack-channel",source_url:"https://myworkspace.slack.com/archives/C024BE91L",captured:new Date,date_range:"2026-01-15 to 2026-02-12",message_count:156,export_scope:"last_100"};function r(){v.innerHTML="";const e=Object.entries(o).filter(([,t])=>t.category==="slack");for(const[t,n]of e){const a=document.createElement("div");a.className="template-row"+(n.enabled?" active":"");const c=document.createElement("label"),l=document.createElement("input");l.type="radio",l.name="active-slack",l.checked=n.enabled,l.addEventListener("change",()=>R(t,"slack"));const p=document.createElement("span");p.className="template-name",p.textContent=n.name,c.appendChild(l),c.appendChild(p);const d=document.createElement("button");d.className="edit-btn",d.textContent="Edit",d.addEventListener("click",()=>I(t)),a.appendChild(c),a.appendChild(d),v.appendChild(a)}}function P(e){y.innerHTML="";for(const[t,n]of Object.entries(e))w(t,j(n))}function w(e="",t=""){const n=document.createElement("div");n.className="field-row";const a=document.createElement("input");a.type="text",a.className="field-key",a.value=e,a.placeholder="key",a.addEventListener("input",i);const c=document.createElement("input");c.type="text",c.className="field-value",c.value=t,c.placeholder="value or {{variable|filter}}",c.addEventListener("input",i);const l=document.createElement("button");l.className="remove-field",l.textContent="Ã—",l.title="Remove field",l.addEventListener("click",()=>{n.remove(),i()}),n.appendChild(a),n.appendChild(c),n.appendChild(l),y.appendChild(n)}function j(e){return Array.isArray(e)?JSON.stringify(e):e}function H(e){const t=e.trim();if(t.startsWith("["))try{const n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return e}function B(){const e={},t=y.querySelectorAll(".field-row");for(const n of t){const a=n.querySelector(".field-key"),c=n.querySelector(".field-value"),l=a.value.trim();l&&(e[l]=H(c.value))}return e}function i(){try{const e=B(),t={};for(const[a,c]of Object.entries(e))t[a]=c;const n=b(t,O);k.textContent=T(n)}catch{k.textContent="(preview error)"}}async function R(e,t){for(const[n,a]of Object.entries(o))a.category===t&&(a.enabled=n===e);await m(o),r()}function I(e){s=e;const t=o[e];t&&(A.textContent=`Edit: ${t.name}`,h.value=t.name,E.disabled=f.has(e),E.title=f.has(e)?"Built-in templates cannot be deleted":"Delete this template",P(t.frontmatter),i(),g.classList.remove("hidden"))}function u(){s=null,g.classList.add("hidden")}async function Y(){if(!s)return;const e=o[s];e&&(e.name=h.value.trim()||e.name,e.frontmatter=B(),await m(o),r(),u())}async function q(){!s||f.has(s)||(delete o[s],await m(o),r(),u())}function V(){const e=`custom_${Date.now()}`;o[e]={name:"New Template",enabled:!1,category:"slack",frontmatter:{title:"{{channel}}",source:"{{source_category}}",captured:'{{captured|date:"YYYY-MM-DDTHH:mm:ssZ"}}',tags:["slack"]}},r(),I(e)}async function W(){o=structuredClone(C),await m(o),r(),u()}S.addEventListener("click",V);x.addEventListener("click",()=>{w(),i()});D.addEventListener("click",Y);F.addEventListener("click",u);E.addEventListener("click",q);M.addEventListener("click",W);async function z(){o=await _(),r()}z();
